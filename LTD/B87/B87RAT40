.pm 20mm
.BR
.NV PAGE BANKSTED '%&EKSPBNKST.'
.BR
.NV PAGE BANK-EKSPEDIENT '%&BRUGERNR.'
.BR
.NV PAGE PRINTER '%&PRINTER.'
.BR
.NV PAGE TØMPOSTKASSE '%&U'&TØMPOST.'
.BR
.NV PAGE FORCERTØM '%&U'&FORCER.'
.BR
.NV PAGE PDFFORMAT '%&U'&PDFFORMAT.'
.da KUNDEOPL       25mm  48mm   width  84mm
.da ARBGOPL       116mm  48mm   width  84mm
.da CPRSENR       120mm  68.6mm width  84mm
.da PIOPL          25mm  76.6mm width  84mm
.da KTOOPL        118mm  78mm   width  76mm
.da INDBARBKOMB    33mm 112.5mm width 170mm
.da INDBARBKOM     33mm 130mm   width 168mm
.**** test ratepensionstype *************
.if &L'&GENARBFAST > 0
.th .go TEST2
.if &L'&GENARBFKOM > 0
.th .go TEST3
.if &L'&GENARBPCT  > 0
.th .go TEST4
.if &L'&GENARBKOMB  > 0
.th .go TEST5
.if &L'&GENARBENGA > 0
.th .go OKTEST
.el .mg /T/Ratepensionstype skal vælges/
...TEST2
.if &L'&GENARBFKOM > 0
.or &L'&GENARBPCT  > 0
.or &L'&GENARBKOMB > 0
.or &L'&GENARBENGA > 0
.th .go FEJL
.el .go OKTEST
...TEST3
.if &L'&GENARBPCT  > 0
.or &L'&GENARBKOMB > 0
.or &L'&GENARBENGA > 0
.th .go FEJL
.el .go OKTEST
...TEST4
.if &L'&GENARBKOMB > 0
.or &L'&GENARBENGA > 0
.th .go FEJL
.el .go OKTEST
...TEST5
.if &L'&GENARBENGA > 0
.th .go FEJL
.el .go OKTEST
...FEJL
.th .mg /T/Højst een ratepensionstype må vælges/
...OKTEST
.*** test arbgiv navn ****************************
.if &L'&GENNAVN1 eq 0
.an &L'&GENGADE1 eq 0
.an &L'&GENBY    eq 0
.an &L'&GENSENR  eq 0
.th .mg /T/Arbejdsgiveroplysninger mangler/
.*** test arbgiv beløb ***************************
.if &GENARB gt 0,00
.or &GENMED gt 0,00
.th .go ARBGIVSL
.el .mg /T/Arb.givers del eller medarbejders del skal indtastes/
...ARBGIVSL
.**** test frekvens **************
.if &L'&GENARBENGA > 0
.th .go EJFREKV
.if &L'&GENLØNINDB = 0
.th .mg /T/Frekvens skal vælges/
.if x&GENLØNINDB < x1
.or x&GENLØNINDB > x6
.th .mg /T/Frekvens skal have værdien 1-6/
.if &L'&GENARBPCT > 0
.or &L'&GENARBKOMB > 0
.or &L'&GENARBFAST > 0
.th .go EJFREKV
.* kun test for genarbfkom(fast kombi)
.if x&GENLØNINDB ne x1
.th .go AAR1SL
.if &L'&RESULTA gt 9
.th .go EJFREKV
.if &L'&RESULTA lt 9
.th .mg /T/BELØB SKAL VÆRE STØRRE END &GENMAXBELA./
.if X&RESULTA gt X&GENMAXBELA.
.th .go EJFREKV
.el .mg /T/BELØB SKAL VÆRE STØRRE END &GENMAXBELA./
...AAR1SL
.if x&GENLØNINDB ne x2
.th .go HALV1SL
.if &L'&RESULTH gt 9
.th .go EJFREKV
.if &L'&RESULTH lt 9
.th .mg /T/BELØB SKAL VÆRE STØRRE END &GENMAXBELA./
.if X&RESULTH gt X&GENMAXBELA.
.th .go EJFREKV
.el .mg /T/BELØB SKAL VÆRE STØRRE END &GENMAXBELA./
...HALV1SL
.****
.if x&GENLØNINDB ne x3
.th .go KVART1SL
.if &L'&RESULTB gt 9
.th .go EJFREKV
.if &L'&RESULTB lt 9
.th .mg /T/BELØB SKAL VÆRE STØRRE END &GENMAXBELA./
.if X&RESULTB gt X&GENMAXBELA.
.th .go EJFREKV
.el .mg /T/BELØB SKAL VÆRE STØRRE END &GENMAXBELA./
...KVART1SL
.****
.if x&GENLØNINDB ne x4
.th .go MDR7SL
.if &L'&RESULTC gt 9
.th .go EJFREKV
.if &L'&RESULTC lt 9
.th .mg /T/BELØB SKAL VÆRE STØRRE END &GENMAXBELA./
.if X&RESULTC gt X&GENMAXBELA.
.th .go EJFREKV
.el .mg /T/BELØB SKAL VÆRE STØRRE END &GENMAXBELA./
...MDR7SL
.if x&GENLØNINDB ne x5
.th .go 14DAGSL
.if &L'&RESULTD gt 9
.th .go EJFREKV
.if &L'&RESULTD lt 9
.th .mg /T/BELØB SKAL VÆRE STØRRE END &GENMAXBELA./
.if X&RESULTD le X&GENMAXBELA.
.th .mg /T/BELØB SKAL VÆRE STØRRE END &GENMAXBELA./
...14DAGSL
.if x&GENLØNINDB ne x6
.th .go EJFREKV
.if &L'&RESULTI gt 9
.th .go EJFREKV
.if &L'&RESULTI lt 9
.th .mg /T/BELØB SKAL VÆRE STØRRE END &GENMAXBELA./
.if X&RESULTI le X&GENMAXBELA.
.th .mg /T/BELØB SKAL VÆRE STØRRE END &GENMAXBELA./
...EJFREKV
.*******************
.if &L'&GENPRISTAL eq 0
.th .go PRISTAL
.if x&GENPRISTAL < x1
.or x&GENPRISTAL > x4
.th .mg /T/Ved pristalsregulering skal indeks være 1-4/
...PRISTAL
.*******************
.if &L'&GENARBKOMB = 0
.an &L'&GENARBFKOM = 0
.th .go UDENTST
.if &L'&GENKOMBKTO = 0
.th .mg /T/Kap.pensionskontonr. mangler på kombinationsaftale/
...UDENTST
.**************
.ar KUNDEOPL on
&NAVN
.br
&COADR
.br
&GADE
.br
&BY
.ar off
.*****************
.ar ARBGOPL on
.if &L'&GENNAVN1 gt 0
.th &GENNAVN1
.th .br
.if &L'&GENGADE1 gt 0
.th &GENGADE1
.th .br
.if &L'&GENBY gt 0
.th &GENBY
.ar off
.****************
.ar CPRSENR on
&GENSENR
.ar off
.****************
.ar PIOPL on
&BANKNAVN
.br
&AFDNAVN
.br
&AFDGADE
.br
&AFDBY
.ar off
.****************
.ar KTOOPL on
.***** HER DELES REGISTRERINGSNUMMER OG KTONUMMER OP I TO PARAMETRE ****
.se regnr = substr &IREGKTO 1 4
.se ktonr = substr &IREGKTO 5 7
.tp 43mm
&KTOKNDNR1
.sp 7mm
.***** HER DELES DEPOTNUMMER  OP I TO PARAMETRE ****
.se dregnr = substr &GENDEPNR 1 4
.se depnr = substr &GENDEPNR 5 6
&regnr &ktonr ¤&dregnr &depnr
.ar off
.*******************
.ar INDBARBKOMB on
.****arbejdsgiver fast  + arbgiver fast kombination ***
.se kombiregnr = substr &GENKOMBKTO 1 4
.se kombiktonr = substr &GENKOMBKTO 5 7
.if &L'&GENARBFAST gt 0
.or &L'&GENARBFKOM gt 0
.th .go KOMB
.el .go KOMBSLUT
...KOMB
.tp 35mm right 70mm right 75mm 132mm right
.if x&GENLØNINDB eq x1
.th ¤¤&RESULTA
.th .go KOMBKTO
.if x&GENLØNINDB eq x2
.th ¤¤&RESULTA ¤¤&RESULTH
.th .go KOMBKTO
.if x&GENLØNINDB eq x3
.th ¤¤&RESULTA ¤¤&RESULTB
.th .go KOMBKTO
.if x&GENLØNINDB eq x4
.th ¤¤&RESULTA ¤¤&RESULTC
.th .go KOMBKTO
.if x&GENLØNINDB eq x5
.th ¤¤&RESULTA ¤¤&RESULTD
.th .go KOMBKTO
.if x&GENLØNINDB eq x6
.th ¤¤&RESULTA ¤¤&RESULTI
...KOMBKTO
.br
¤&RESULTA ¤¤&GENDATO12..
.if &L'&GENARBFAST gt 0
.th .go KOMBSLUT
...TESTVIDR
.tp 106mm
.br
¤&kombiregnr &kombiktonr
...KOMBSLUT
.ar off
.*************
.ar INDBARBKOM on
.if &L'&GENARBFAST gt 0
.or &L'&GENARBFKOM gt 0
.th .go SKRIV5
.el .go SKRIV5SL
...SKRIV5
.tp 27mm char ,
¤&GENARB
.br
¤&GENMED
...SKRIV5SL
.ar off
.*forts. i t2 **
.**************************************************************************
.* PARAMETRENE VEDR. MAKSIMUMBELØB -ÅR ************************************
.* PARAMETRE TIL KAPITAL OG RATEPENSIONSBREVENE:
.**************************************************************************
.* BECPEN01
.* BECPEN02
.* BECPEN20
.* BECPEN40
.* BECPEN60
.**************************************************************************
.* BECAPF10
.* BECAPF15
.* BECAPF20
.* BECAPF40
.* BECAPF50
.**************************************************************************
.* BECKAP10
.* BECRAT15
.* BECRAT16
.* BECRAT17
.* BECKAP20
.* BECRAT40
.* BECRAT50
.**************************************************************************
.* DET ER FLG. PARAMETRE: GENMAXBEL, GENMAXBELA(incl arbejdsmarkedsbidrag)*
.* GENMAX15, GENMAX15B  *****
.* GENMAXDATO                                                         *****
.**************************************************************************
.**MIDLERTIDIGE PARAMETRE PRIMÆRT TIL GAMMEL ORDNING **********************
.**uddag og udmd BRUGES OGSÅ TIL NY ORDNING *******************************
.su off
.se fdag = substr &KTOKNDNR1 1 2
.se fmd = substr &KTOKNDNR1 3 2
.se faar = substr &KTOKNDNR1 5 2
.** SUBSTRING PÅ OPRETTELSESDAG / MED VIRKNING FRA DATO *******************
.se odag = substr &GENDATO12 1 2
.se omd = substr &GENDATO12 4 2
.se oaar = substr &GENDATO12 7 4
.se oaar2 = substr &GENDATO12 9 2
.** SUBSTRING PÅ DATO FOR START PÅ UDBETALING *****************************
.se uddag = substr &GENSTART 1 2
.se udmd = substr &GENSTART 4 2
.se udaar = substr &GENSTART 7 4
.** SUBSTRING PÅ DAGS DATO ************************************************
.se daar = substr &DATO 9 2
.su on
.if x&faar > x&daar
.th .se aarstal = 1900
.el .se aarstal = 2000
.** FØDEÅR (faar1), MINIMUMSLØBETID (udminaar)*****************************
.se faar1 = &faar + &aarstal
.se udminaar = &oaar + 5
.**************************************************************************
.***TEST VEDR. GL. ORDNING FØR 1. MAJ 2007 ********************************
.**************************************************************************
.if &L'&GENIDTO13 = 0
.an &L'&GEN1MAJ07 > 0
.th .mg/T/Ovf. pensioner: Erstatter kontrakt af - skal udfyldes./
.if &L'&GENIDTO13 > 0
.an &L'&GEN1MAJ07 > 0
.th .se glordn = 1
.el .se glordn = 0
.********************************
.**TEST VEDR. GAMMEL ORDNING - SÅ SKAL EFTERLØNSTRAPPEN IKKE BRUGES *******
.if x&glordn = x1
.th .se udminaar1 = &faar1 + 60
.th .go TRAPEND
.**************************************************************************
.***TEST VEDR. VELFÆRDSREFORM PR. 1. MAJ 2007 *****************************
.***NYE TESTS TRAPPEDIAGRAM ***********************************************
.**1. TRIN***********************
.if x&faar1 < x1959
.th .se udminaar1 = &faar1 + 60
.**2. TRIN***********************
.if x&faar1 = x1959
.an x&fmd < x07
.th .se udminaar1 = 2019
.**3. TRIN***********************
.if x&faar1 = x1959
.an x&fmd ge x07
.th .se udminaar1 = 2020
.**4. TRIN***********************
.if x&faar1 = x1960
.an x&fmd < x07
.th .se udminaar1 = 2021
.**5. TRIN***********************
.if x&faar1 = x1960
.an x&fmd ge x07
.th .se udminaar1 = 2022
.**5. TRIN  FORTSAT + 6. TRIN **
.if x&faar1 > x1960
.th .se udminaar1 = &faar1 + 62
.**********************************
...TRAPEND
.se udmaxaar = &udminaar1 + 16
.se alder = &udaar - &faar1
.se alder1 = &alder - 1
.se alderslut = &alder + &GENANTUDÅR - 1
.****************ANTAL INDBETALINGS ÅR EFTER EFTERLØNSALDEREN ************
.se indbaar = &udaar - &udminaar1 - 1
.***************UDBETALING START OG SLUT EFTER EFTERLØNSALDREN ************
.se udbstart = &indbaar + 1
.se udbslaar = &indbaar + &GENANTUDÅR
.***** HER TESTES PÅ OM KONTOHAVER ER OVER EFTERLØNSALDEREN ***************
.**DER TESTES IKKE VED OVERFØRSLER ****************************************
.**TEST PÅ AT ALDER VED UDBETALINGSSTART ER MIN. 5 ÅR EFTER OPRETTELSE*****
.**DER TESTES IKKE VED OVERFØRSLER ****************************************
...ALDER
.if x&udaar < x&udminaar
.th .go FEJL5
.if x&udaar > x&udminaar
.th .go GOD1
.if x&udmd < x&omd
.th .go FEJL5
.if x&udmd > x&omd
.th .go GOD1
.if x&uddag < x&odag
.th .go FEJL5
.el .go GOD1
...FEJL5
.th .mg /T/Udbetalingens startår min. 5 år efter oprettelse/
...GOD1
.***** HER TESTES PÅ OM KONTOHAVER ER ÆLDRE END EFTERLØNSALDER + 16 ÅR ****
.if x&udaar > x&udmaxaar
.th .go FEJL6
.if x&udaar < x&udmaxaar
.th .go MINAAR
.***** HER TESTES PÅ OM KONTOHAVER ER YNGRE END EFTERLØNSALDER ************
...MINAAR
.if x&udaar < x&udminaar1
.th .go FEJL6
.if x&udaar > x&udminaar1
.th .go OK1
.***** HER TESTES PÅ MÅNEDER OG DAG ***************************************
.if x&udmd < x&fmd
.th .go FEJL6
.if x&udmd > x&fmd
.th .go OK1
.if x&uddag < x&fdag
.th .go FEJL6
.el .go OK1
.***** HER AFSLUTTES TESTEN PÅ UDBETALINGSDATOEN **************************
...FEJL6
.mg /T/Udbet.dato: min=(efterlønsalder), max=(efterlønsalder + 16 år)/
...OK1
.**************************************************************************
.if X&GENANTUDÅR < X10
.or X&GENANTUDÅR > X25
.th .mg /T/Antal udbetalingsår skal være mellem 10 og 25 år/
.**************

